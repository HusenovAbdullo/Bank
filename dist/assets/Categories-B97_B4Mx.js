import{d as $,a as w,r as _,c as j,g as O,A as q,z as F,w as l,B as J,o as f,C as U,D as G,j as t,E,G as L,H as R,h as C,u as i,i as n,k as h,I as X,t as m,v as Y,F as Z,l as Q}from"./index-DrwtuItr.js";import{a as W}from"./axios-D4YhIzwJ.js";import{F as x}from"./FileSaver.min-BZvPLmSZ.js";import{u as M,w as ee}from"./xlsx-DVFzcVXd.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-BEdiinS3.js";import{T as p}from"./index-BH-BeXH9.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * Vue 3 Loading Overlay 0.0.0
 * (c) 2020
 * @license MIT
 */var z=$({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});const ae=t("g",{fill:"none","fill-rule":"evenodd"},[t("g",{transform:"translate(1 1)","stroke-width":"2"},[t("circle",{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}),t("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[t("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"})])])],-1);function re(a,v,s,d,u,c){return f(),w("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:a.width,height:a.height,stroke:a.color},[ae],8,["width","height","stroke"])}z.render=re;z.__file="src/loaders/Spinner.vue";var I=$({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}});const oe=t("circle",{cx:"15",cy:"15",r:"15"},[t("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),se=t("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[t("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),ie=t("circle",{cx:"105",cy:"15",r:"15"},[t("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),t("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);function le(a,v,s,d,u,c){return f(),w("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:a.color,width:a.width,height:a.height},[oe,se,ie],8,["fill","width","height"])}I.render=le;I.__file="src/loaders/Dots.vue";var A=$({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}});const ne=t("rect",{x:"0",y:"13",width:"4",height:"5"},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})],-1),de=t("rect",{x:"10",y:"13",width:"4",height:"5"},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})],-1),ce=t("rect",{x:"20",y:"13",width:"4",height:"5"},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})],-1);function ue(a,v,s,d,u,c){return f(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:a.height,width:a.width,fill:a.color},[ne,de,ce],8,["height","width","fill"])}A.render=ue;A.__file="src/loaders/Bars.vue";var he={Spinner:z,Dots:I,Bars:A},D=$({name:"vue-loading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,HTMLElement],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:{type:Number,default:100},loader:{type:String,default:"spinner"}},setup(a,v){const s=_(a.active),d=j(()=>({background:a.backgroundColor,opacity:a.opacity,backdropFilter:`blur(${a.blur})`})),u=()=>{a.programmatic&&(s.value=!1,setTimeout(()=>{},150))},c=()=>{!a.canCancel||!s.value||(u(),a.onCancel())},g=k=>{k.keyCode===27&&c()},N=()=>{a.isFullPage&&a.lockScroll&&document.body.classList.add("vld-shown")},T=()=>{a.isFullPage&&a.lockScroll&&document.body.classList.remove("vld-shown")};return O(()=>{a.programmatic&&(s.value=!0,document.addEventListener("keyup",g))}),q(()=>{document.removeEventListener("keyup",g)}),F(()=>a.active,()=>{s.value=a.active}),F(s,()=>{s.value?N():T()}),{isActive:s,bgStyle:d,hide:u,cancel:c}},components:he});const pe={class:"vld-icon"};function me(a,v,s,d,u,c){return f(),w(J,{ref:"root",name:a.transition},{default:l(()=>[U(t("div",{tabindex:"0",class:["vld-overlay is-active",{"is-full-page":a.isFullPage}],"aria-busy":a.isActive,"aria-label":"Loading",style:{zIndex:a.zIndex}},[t("div",{class:"vld-background",onClick:v[1]||(v[1]=E((...g)=>a.cancel&&a.cancel(...g),["prevent"])),style:a.bgStyle},null,4),t("div",pe,[L(a.$slots,"before"),L(a.$slots,"default",{},()=>[(f(),w(R(a.loader),{color:a.color,width:a.width,height:a.height},null,8,["color","width","height"]))]),L(a.$slots,"after")])],14,["aria-busy"]),[[G,a.isActive]])]),_:3},8,["name"])}D.render=me;D.__file="src/main/Component.vue";const fe={class:"p-5 relative"},ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 text-white text-xl font-semibold"},be=["src"],ge={class:"text-lg font-medium intro-y mb-5"},ye={class:"flex flex-wrap gap-2 items-center mb-6"},_e={class:"flex gap-3"},we={class:"image-fit zoom-in w-36 h-36"},$e=["src","onClick"],ke={class:"image-fit zoom-in w-36 h-36"},Ce=["src","onClick"],xe={href:"#",class:"font-medium whitespace-nowrap"},Ne={class:"text-slate-500 text-xs mt-0.5"},Te={class:"whitespace-normal"},Se={class:"text-slate-500 text-xs mt-0.5"},Be=$({__name:"Categories",setup(a){const v=_(""),s=_(""),d=_([]),u=_(!1),c=_(""),g=async()=>{u.value=!0;try{const e=localStorage.getItem("token");if(!e){alert("Token mavjud emas. Iltimos, qayta login qiling."),window.location.href="/login";return}const r=await W.post("https://treking.uz/barcodes-info/",{barcodes:[v.value||s.value]},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});d.value=r.data}catch(e){console.error("Xatolik:",e),d.value=[],alert("Ma'lumot olishda xatolik yuz berdi.")}finally{u.value=!1}},N=j(()=>s.value.trim()?d.value.filter(e=>e.barcode.toLowerCase().includes(s.value.toLowerCase())||e.name.toLowerCase().includes(s.value.toLowerCase())||e.address.toLowerCase().includes(s.value.toLowerCase())):d.value),T=()=>{s.value="",v.value="",d.value=[]},k=()=>{let e=`Barcode,Name,Address,Date
`;d.value.forEach(o=>{e+=`"${o.barcode}","${o.name}","${o.address}","${o.last_status_date}"
`});const r=new Blob([e],{type:"text/csv;charset=utf-8;"});x.saveAs(r,"barcodes.csv")},V=()=>{const e=new Blob([JSON.stringify(d.value,null,2)],{type:"application/json"});x.saveAs(e,"barcodes.json")},P=()=>{let e="<table border='1'><tr><th>Imzo</th><th>Karta</th><th>Barcode</th><th>Name</th><th>Address</th><th>Date</th></tr>";d.value.forEach(o=>{e+=`
      <tr>
        <td><img src="${o.recipient_signature_url}" width="100" /></td>
        <td><img src="${o.recipient_card_url}" width="100" /></td>
        <td>${o.barcode}</td>
        <td>${o.name}</td>
        <td>${o.address}</td>
        <td>${o.last_status_date}</td>
      </tr>`}),e+="</table>";const r=new Blob([e],{type:"text/html"});x.saveAs(r,"barcodes.html")},H=()=>{const e=window.open("","","width=900,height=700");e==null||e.document.write("<html><head><title>Print</title></head><body>"),e==null||e.document.write("<h3>Barcode Ma'lumotlari</h3><table border='1' cellpadding='10'><tr><th>Imzo</th><th>Karta</th><th>Barcode</th><th>Name</th><th>Address</th><th>Date</th></tr>"),d.value.forEach(r=>{e==null||e.document.write(`
      <tr>
        <td><img src="${r.recipient_signature_url}" width="100"/></td>
        <td><img src="${r.recipient_card_url}" width="100"/></td>
        <td>${r.barcode}</td>
        <td>${r.name}</td>
        <td>${r.address}</td>
        <td>${r.last_status_date}</td>
      </tr>`)}),e==null||e.document.write("</table></body></html>"),e==null||e.document.close(),e==null||e.print()},K=()=>{const e=d.value.map(y=>({Imzo:y.recipient_signature_url,Karta:y.recipient_card_url,Barcode:y.barcode,Name:y.name,Address:y.address,Date:y.last_status_date})),r=M.json_to_sheet(e),o=M.book_new();M.book_append_sheet(o,r,"Barcodes");const S=ee(o,{bookType:"xlsx",type:"array"}),B=new Blob([S],{type:"application/octet-stream"});x.saveAs(B,"barcodes.xlsx")};return(e,r)=>(f(),C("div",fe,[t(i(D),{active:u.value,loader:"ball-triangle",color:"#1e40af","is-full-page":!0},null,8,["active"]),u.value?(f(),C("div",ve,r[2]||(r[2]=[n("div",{class:"text-center"},[h(" Yuklanmoqda"),n("span",{class:"dots"},[n("span",null,"."),n("span",null,"."),n("span",null,".")])],-1)]))):X("",!0),c.value?(f(),C("div",{key:1,class:"fixed inset-0 z-[100] bg-black bg-opacity-80 flex items-center justify-center",onClick:r[0]||(r[0]=E(o=>c.value="",["self"]))},[n("img",{src:c.value,alt:"Zoom Image",class:"max-w-full max-h-full rounded shadow-lg"},null,8,be)])):X("",!0),n("h2",ge,m(e.$t("proof_of_delivery")),1),n("div",ye,[t(i(Y),{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=o=>s.value=o),type:"text",class:"!box w-56",placeholder:e.$t("search")},null,8,["modelValue","placeholder"]),t(i(b),{variant:"primary",onClick:g},{default:l(()=>[h(m(e.$t("go")),1)]),_:1}),t(i(b),{variant:"secondary",onClick:T},{default:l(()=>[h(m(e.$t("reset")),1)]),_:1}),t(i(b),{variant:"outline-primary",onClick:H},{default:l(()=>r[3]||(r[3]=[h("Print")])),_:1}),t(i(b),{variant:"outline-primary",onClick:k},{default:l(()=>r[4]||(r[4]=[h("CSV")])),_:1}),t(i(b),{variant:"outline-primary",onClick:V},{default:l(()=>r[5]||(r[5]=[h("JSON")])),_:1}),t(i(b),{variant:"outline-primary",onClick:K},{default:l(()=>r[6]||(r[6]=[h("XLSX")])),_:1}),t(i(b),{variant:"outline-primary",onClick:P},{default:l(()=>r[7]||(r[7]=[h("HTML")])),_:1})]),t(i(p),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:l(()=>[t(i(p).Thead,null,{default:l(()=>[t(i(p).Tr,null,{default:l(()=>[t(i(p).Th,{class:"whitespace-nowrap"},{default:l(()=>[h(m(e.$t("images")),1)]),_:1}),t(i(p).Th,{class:"whitespace-nowrap"},{default:l(()=>[h(m(e.$t("name_barcode")),1)]),_:1}),t(i(p).Th,{class:"whitespace-nowrap"},{default:l(()=>[h(m(e.$t("address_time")),1)]),_:1})]),_:1})]),_:1}),t(i(p).Tbody,null,{default:l(()=>[(f(!0),C(Z,null,Q(N.value,(o,S)=>(f(),w(i(p).Tr,{key:S,class:"intro-x"},{default:l(()=>[t(i(p).Td,{class:"box dark:bg-darkmode-600 border-x-0"},{default:l(()=>[n("div",_e,[n("div",we,[n("img",{src:o.recipient_signature_url,alt:"Imzo",onClick:B=>c.value=o.recipient_signature_url,class:"rounded shadow cursor-pointer hover:opacity-80 transition"},null,8,$e)]),n("div",ke,[n("img",{src:o.recipient_card_url,alt:"Karta",onClick:B=>c.value=o.recipient_card_url,class:"rounded shadow cursor-pointer hover:opacity-80 transition"},null,8,Ce)])])]),_:2},1024),t(i(p).Td,{class:"box dark:bg-darkmode-600 border-x-0"},{default:l(()=>[n("a",xe,m(o.name),1),n("div",Ne,"Kod: "+m(o.barcode),1)]),_:2},1024),t(i(p).Td,{class:"box dark:bg-darkmode-600 border-x-0"},{default:l(()=>[n("div",Te,m(o.address),1),n("div",Se," Holati: "+m(new Date(o.last_status_date).toLocaleString()),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))}}),Xe=te(Be,[["__scopeId","data-v-6c6ddf7e"]]);export{Xe as default};
