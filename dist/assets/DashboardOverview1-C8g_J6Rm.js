import{_ as z}from"./Button.vue_vue_type_script_setup_true_lang-B_0nlnlX.js";import{d as F,c as p,o as m,a as Y,u as n,b as P,e as T,f as V,r as f,g as j,h,i as t,t as a,j as d,k as C,F as $,l as D,m as O,w as S,n as x,p as L,_ as v,q as E}from"./index-BkxZ8ppa.js";import{_ as J}from"./VerticalBarChart.vue_vue_type_script_setup_true_lang-CpQw9oO4.js";import{_ as W,g}from"./colors-Cz3PgzZz.js";import"./axios-D4YhIzwJ.js";const X=F({__name:"ReportPieChart",props:{width:{},height:{},data:{}},setup(I){const c=I,b=p(()=>P().colorScheme),w=p(()=>T().darkMode),y=p(()=>({labels:c.data.map(l=>l.label),datasets:[{data:c.data.map(l=>l.percent),backgroundColor:b.value?c.data.map(l=>l.color):"",hoverBackgroundColor:b.value?c.data.map(l=>l.color):"",borderWidth:5,borderColor:w.value?g("darkmode.700"):g("white")}]})),k=p(()=>({maintainAspectRatio:!1,plugins:{legend:{display:!1}}}));return(l,i)=>(m(),Y(n(W),{type:"pie",width:c.width,height:c.height,data:y.value,options:k.value},null,8,["width","height","data","options"]))}}),G={class:"grid grid-cols-12 gap-6"},H={class:"col-span-12 2xl:col-span-9"},K={class:"grid grid-cols-12 gap-6"},Q={class:"col-span-12 mt-8"},Z={class:"flex items-center h-10 intro-y"},tt={class:"mr-5 text-lg font-medium truncate"},et={class:"grid grid-cols-12 gap-6 mt-5"},ot={class:"relative zoom-in before:box before:absolute before:inset-x-3 before:mt-3 before:h-full before:bg-slate-50 before:content-['']"},st={class:"p-5 box"},at={class:"flex"},lt={class:"ml-auto"},nt={class:"mt-6 text-3xl font-medium leading-8"},rt={class:"mt-1 text-base text-slate-500"},it={class:"col-span-12 mt-8 lg:col-span-9"},ct={class:"items-center block h-10 intro-y sm:flex"},dt={class:"mr-5 text-lg font-medium truncate"},ut={class:"p-5 mt-12 intro-y box sm:mt-5"},mt={class:x(["relative","before:content-[''] before:block before:absolute before:w-16 before:left-0 before:top-0 before:bottom-0 before:ml-10 before:mb-7 before:bg-gradient-to-r before:from-white before:via-white/80 before:to-transparent before:dark:from-darkmode-600","after:content-[''] after:block after:absolute after:w-16 after:right-0 after:top-0 after:bottom-0 after:mb-7 after:bg-gradient-to-l after:from-white after:via-white/80 after:to-transparent after:dark:from-darkmode-600"])},ht={class:"col-span-12 mt-8 sm:col-span-6 lg:col-span-3"},pt={class:"flex items-center h-10 intro-y"},_t={class:"mr-5 text-lg font-medium truncate"},ft={href:"",class:"ml-auto truncate text-primary"},vt={class:"p-5 mt-5 intro-y box"},bt={class:"mt-3"},gt={class:"mx-auto mt-8 w-52 sm:w-auto"},xt={class:"truncate"},wt={class:"ml-auto font-medium"},yt={class:"col-span-12 2xl:col-span-3"},kt={class:"pb-10 -mb-10 2xl:border-l"},Ct={class:"grid grid-cols-12 2xl:pl-6 gap-x-6 2xl:gap-x-0 gap-y-6"},$t={class:"col-span-12 mt-3 md:col-span-6 xl:col-span-4 2xl:col-span-12 xl:col-start-1 xl:row-start-2 2xl:col-start-auto 2xl:row-start-auto"},Dt={class:"flex items-center h-10 intro-x"},It={class:"mr-5 text-lg font-medium truncate"},Mt={class:"mt-5"},St={class:"intro-x box mt-5"},Ft={class:"p-5"},Nt={class:"flex items-center justify-between"},Rt={class:"text-base font-medium"},Ut={class:"grid grid-cols-7 gap-4 mt-5 text-center"},At={class:"p-10 box intro-x"},Bt={class:"text-xl font-bold mb-4"},qt={class:"text-slate-500 mt-2"},jt=F({__name:"DashboardOverview1",setup(I){const{t:c}=V(),b=p(()=>[{label:c("in_sorting"),percent:parseFloat(u.value.other_items.percent),color:g("primary",.9)},{label:c("completed"),percent:parseFloat(u.value.on_way_items.percent),color:g("pending",.9)},{label:c("returned"),percent:parseFloat(u.value.return.percent),color:g("warning",.9)}]);f("");const w=f();L("bind[importantNotesRef]",e=>{w.value=e});const y=f(null),k=()=>{var e;return(e=y.value)==null?void 0:e.click()},l=new Date,i=f(l.getMonth()),_=f(l.getFullYear()),N=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentyabr","Oktyabr","Noyabr","Dekabr"],R=(e,o)=>new Date(e,o+1,0).getDate(),U=p(()=>new Date(_.value,i.value,1).getDay()),A=p(()=>{const e=R(_.value,i.value),o=[],s=(U.value+6)%7;for(let r=0;r<s;r++)o.push(null);for(let r=1;r<=e;r++)o.push(r);return o}),B=()=>{i.value===0?(i.value=11,_.value-=1):i.value-=1},q=()=>{i.value===11?(i.value=0,_.value+=1):i.value+=1},u=f({total_items:{count:0,percent:"0%"},other_items:{count:0,percent:"0%"},on_way_items:{count:0,percent:"0%"},return:{count:0,percent:"0%"}}),M=async()=>{const e=localStorage.getItem("token");if(!e){alert("Token topilmadi. Iltimos, qayta kiring."),window.location.href="/login";return}try{const o=await fetch("https://bank1.pochta.uz/api/v1/dashboard-status/",{headers:{Authorization:"Bearer "+e}});if(o.status===401){alert("Token muddati tugagan. Iltimos, qayta login qiling."),localStorage.removeItem("token"),window.location.href="/login";return}if(o.ok){const s=await o.json();u.value=s}else console.error("API xatolik:",o.status)}catch(o){console.error("Tarmoq xatoligi:",o)}};return j(()=>{M()}),(e,o)=>(m(),h("div",G,[t("div",H,[t("div",K,[t("div",Q,[t("div",Z,[t("h2",tt,a(e.$t("general_report")),1),t("button",{onClick:M,class:"flex items-center ml-auto text-primary"},[d(n(v),{icon:"RefreshCcw",class:"w-4 h-4 mr-3"}),C(" "+a(e.$t("reload_data")),1)])]),t("div",et,[(m(!0),h($,null,D([{label:e.$t("all"),icon:"UsersIcon",data:u.value.total_items},{label:e.$t("in_sorting"),icon:"UserPlusIcon",data:u.value.other_items},{label:e.$t("completed"),icon:"UserCheckIcon",data:u.value.on_way_items},{label:e.$t("returned"),icon:"UserXIcon",data:u.value.return}],(s,r)=>(m(),h("div",{class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y",key:r},[t("div",ot,[t("div",st,[t("div",at,[d(n(v),{icon:s.icon,class:"w-[28px] h-[28px] text-primary"},null,8,["icon"]),t("div",lt,[d(n(E),{as:"div",class:"cursor-pointer bg-success py-[3px] flex rounded-full text-white text-xs pl-2 pr-1 items-center font-medium",content:s.data.percent+" oâ€˜zgarish"},{default:S(()=>[C(a(s.data.percent)+" ",1),d(n(v),{icon:"ChevronUp",class:"w-4 h-4 ml-0.5"})]),_:2},1032,["content"])])]),t("div",nt,a(s.data.count),1),t("div",rt,a(s.label),1)])])]))),128))])]),t("div",it,[t("div",ct,[t("h2",dt,a(e.$t("monthly_report")),1)]),t("div",ut,[t("div",mt,[d(n(J),{height:400})])])]),t("div",ht,[t("div",pt,[t("h2",_t,a(e.$t("report")),1),t("a",ft,a(e.$t("refresh")),1)]),t("div",vt,[t("div",bt,[d(n(X),{height:213,data:b.value},null,8,["data"])]),t("div",gt,[(m(!0),h($,null,D(b.value,(s,r)=>(m(),h("div",{key:r,class:x(["flex items-center mt-4",{"mt-0":r===0}])},[t("div",{class:x(["w-2 h-2 mr-3 rounded-full",s.color])},null,2),t("span",xt,a(s.label),1),t("span",wt,a(s.percent),1)],2))),128))])])])])]),t("div",yt,[t("div",kt,[t("div",Ct,[t("div",$t,[t("div",Dt,[t("h2",It,a(e.$t("calendar")),1)]),t("div",Mt,[t("div",St,[t("div",Ft,[t("div",Nt,[t("button",{onClick:B},[d(n(v),{icon:"ChevronLeft",class:"w-5 h-5 text-slate-500"})]),t("div",Rt,a(N[i.value])+" "+a(_.value),1),t("button",{onClick:q},[d(n(v),{icon:"ChevronRight",class:"w-5 h-5 text-slate-500"})])]),t("div",Ut,[o[0]||(o[0]=O('<div class="font-medium">Du</div><div class="font-medium">Se</div><div class="font-medium">Cho</div><div class="font-medium">Pa</div><div class="font-medium">Ju</div><div class="font-medium">Sha</div><div class="font-medium">Ya</div>',7)),(m(!0),h($,null,D(A.value,(s,r)=>(m(),h("div",{key:r,class:x(["py-0.5 rounded relative",{"text-slate-400":s===null,"bg-primary text-white":s===n(l).getDate()&&i.value===n(l).getMonth()&&_.value===n(l).getFullYear()}])},a(s??""),3))),128))])])])]),o[1]||(o[1]=t("br",null,null,-1)),t("div",At,[t("h2",Bt,a(e.$t("xml_upload")),1),d(n(z),{variant:"primary",class:"mb-4",onClick:k},{default:S(()=>[d(n(v),{icon:"Upload",class:"w-4 h-4 mr-2"}),C(" "+a(e.$t("upload_file")),1)]),_:1}),t("p",qt,a(e.$t("xml_description")),1)])])])])])]))}});export{jt as default};
