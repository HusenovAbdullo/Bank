import{d as j,f as A,r as p,J as T,z as V,g as $,h,i as n,t as f,j as o,u as l,w as i,C as E,K as B,F,l as L,o as g,v as N,k as r,_ as R}from"./index-DrwtuItr.js";import{T as X,c as I,i as M}from"./tabulator_esm-DCtBT1lt.js";import{_ as d}from"./Button.vue_vue_type_script_setup_true_lang-BEdiinS3.js";import{x as P}from"./xlsx-DVFzcVXd.js";const H={class:"intro-y box p-5 mt-5"},J={class:"flex items-center justify-between"},U={class:"text-lg font-medium"},D={class:"mt-5 flex gap-2 flex-wrap items-center"},O=["value"],G={class:"overflow-x-auto scrollbar-hidden mt-5"},Z=j({__name:"Reviews",setup(K){const{t:m}=A(),v=p(),a=p(),u=p(10),c=T({field:"batch",type:"like",value:""}),w=async()=>{const t=localStorage.getItem("token");if(!t){alert("Token topilmadi. Iltimos, tizimga kiring.");return}v.value&&(a.value=new X(v.value,{ajaxURL:"https://treking.uz/batch-stats/",ajaxConfig:{method:"GET",headers:{Authorization:`Bearer ${t}`}},ajaxResponse:(e,s,S)=>S,layout:"fitColumns",pagination:!0,paginationSize:u.value,paginationMode:"local",placeholder:"No matching records found",columns:[{title:"BATCH",field:"batch",hozAlign:"center"},{title:m("small_packages_count"),field:"rz_count",hozAlign:"center"},{title:m("parcels_count"),field:"cz_count",hozAlign:"center"},{title:m("small_packages_weight"),field:"rz_weight_sum",hozAlign:"center"},{title:m("parcels_weight"),field:"cz_weight_sum",hozAlign:"center"}]}),a.value.on("renderComplete",()=>{I({icons:M,attrs:{"stroke-width":1.5},nameAttr:"data-lucide"})}))},_=()=>{var t;return(t=a.value)==null?void 0:t.setFilter(c.field,c.type,c.value)},k=()=>{Object.assign(c,{field:"batch",type:"like",value:""}),_()},x=()=>{var t;return(t=a.value)==null?void 0:t.download("csv","batch-stats.csv")},b=()=>{var t;return(t=a.value)==null?void 0:t.download("json","batch-stats.json")},y=()=>{var t;window.XLSX=P,(t=a.value)==null||t.download("xlsx","batch-stats.xlsx",{sheetName:"Batch Stats"})},C=()=>{var t;return(t=a.value)==null?void 0:t.download("html","batch-stats.html",{style:!0})},z=()=>{var t;return(t=a.value)==null?void 0:t.print()};return V(u,()=>{var t;(t=a.value)==null||t.setPageSize(u.value)}),$(()=>{w(),window.addEventListener("resize",()=>{var t;return(t=a.value)==null?void 0:t.redraw()})}),(t,e)=>(g(),h("div",H,[n("div",J,[n("h2",U,f(t.$t("statistics")),1)]),n("div",D,[o(l(N),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),style:{width:"250px"},placeholder:t.$t("search_batch")},null,8,["modelValue","placeholder"]),o(l(d),{onClick:_},{default:i(()=>[r(f(t.$t("go")),1)]),_:1}),o(l(d),{variant:"secondary",onClick:k},{default:i(()=>[r(f(t.$t("reset")),1)]),_:1}),o(l(d),{variant:"outline-secondary",onClick:z},{default:i(()=>[o(l(R),{icon:"Printer",class:"w-4 h-4 mr-2"}),e[2]||(e[2]=r(" Print "))]),_:1}),o(l(d),{variant:"outline-secondary",onClick:x},{default:i(()=>e[3]||(e[3]=[r("CSV")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:b},{default:i(()=>e[4]||(e[4]=[r("JSON")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:y},{default:i(()=>e[5]||(e[5]=[r("XLSX")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:C},{default:i(()=>e[6]||(e[6]=[r("HTML")])),_:1}),E(n("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"form-select ml-auto w-20"},[(g(),h(F,null,L([10,20,50,100],s=>n("option",{key:s,value:s},f(s),9,O)),64))],512),[[B,u.value]])]),n("div",G,[n("div",{ref_key:"tableRef",ref:v},null,512)])]))}});export{Z as default};
