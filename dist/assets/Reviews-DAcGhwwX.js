import{d as A,f as j,r as p,A as T,z as V,g as $,h,i as n,t as f,j as o,u as l,w as i,B,C as E,F,l as L,o as g,v as N,k as r,_ as R}from"./index-BkxZ8ppa.js";import{T as X,c as I,x as M,i as P}from"./xlsx-DAllgAbK.js";import{_ as d}from"./Button.vue_vue_type_script_setup_true_lang-B_0nlnlX.js";const H={class:"intro-y box p-5 mt-5"},U={class:"flex items-center justify-between"},D={class:"text-lg font-medium"},J={class:"mt-5 flex gap-2 flex-wrap items-center"},O=["value"],G={class:"overflow-x-auto scrollbar-hidden mt-5"},Y=A({__name:"Reviews",setup(q){const{t:m}=j(),v=p(),a=p(),u=p(10),c=T({field:"batch",type:"like",value:""}),w=async()=>{const e=localStorage.getItem("token");if(!e){alert("Token topilmadi. Iltimos, tizimga kiring.");return}v.value&&(a.value=new X(v.value,{ajaxURL:"https://treking.uz/batch-stats/",ajaxConfig:{method:"GET",headers:{Authorization:`Bearer ${e}`}},ajaxResponse:(t,s,S)=>S,layout:"fitColumns",pagination:!0,paginationSize:u.value,paginationMode:"local",placeholder:"No matching records found",columns:[{title:"BATCH",field:"batch",hozAlign:"center"},{title:m("small_packages_count"),field:"rz_count",hozAlign:"center"},{title:m("parcels_count"),field:"cz_count",hozAlign:"center"},{title:m("small_packages_weight"),field:"rz_weight_sum",hozAlign:"center"},{title:m("parcels_weight"),field:"cz_weight_sum",hozAlign:"center"}]}),a.value.on("renderComplete",()=>{I({icons:P,attrs:{"stroke-width":1.5},nameAttr:"data-lucide"})}))},_=()=>{var e;return(e=a.value)==null?void 0:e.setFilter(c.field,c.type,c.value)},k=()=>{Object.assign(c,{field:"batch",type:"like",value:""}),_()},x=()=>{var e;return(e=a.value)==null?void 0:e.download("csv","batch-stats.csv")},b=()=>{var e;return(e=a.value)==null?void 0:e.download("json","batch-stats.json")},y=()=>{var e;window.XLSX=M,(e=a.value)==null||e.download("xlsx","batch-stats.xlsx",{sheetName:"Batch Stats"})},C=()=>{var e;return(e=a.value)==null?void 0:e.download("html","batch-stats.html",{style:!0})},z=()=>{var e;return(e=a.value)==null?void 0:e.print()};return V(u,()=>{var e;(e=a.value)==null||e.setPageSize(u.value)}),$(()=>{w(),window.addEventListener("resize",()=>{var e;return(e=a.value)==null?void 0:e.redraw()})}),(e,t)=>(g(),h("div",H,[n("div",U,[n("h2",D,f(e.$t("statistics")),1)]),n("div",J,[o(l(N),{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),style:{width:"250px"},placeholder:e.$t("search_batch")},null,8,["modelValue","placeholder"]),o(l(d),{onClick:_},{default:i(()=>[r(f(e.$t("go")),1)]),_:1}),o(l(d),{variant:"secondary",onClick:k},{default:i(()=>[r(f(e.$t("reset")),1)]),_:1}),o(l(d),{variant:"outline-secondary",onClick:z},{default:i(()=>[o(l(R),{icon:"Printer",class:"w-4 h-4 mr-2"}),t[2]||(t[2]=r(" Print "))]),_:1}),o(l(d),{variant:"outline-secondary",onClick:x},{default:i(()=>t[3]||(t[3]=[r("CSV")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:b},{default:i(()=>t[4]||(t[4]=[r("JSON")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:y},{default:i(()=>t[5]||(t[5]=[r("XLSX")])),_:1}),o(l(d),{variant:"outline-secondary",onClick:C},{default:i(()=>t[6]||(t[6]=[r("HTML")])),_:1}),B(n("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"form-select ml-auto w-20"},[(g(),h(F,null,L([10,20,50,100],s=>n("option",{key:s,value:s},f(s),9,O)),64))],512),[[E,u.value]])]),n("div",G,[n("div",{ref_key:"tableRef",ref:v},null,512)])]))}});export{Y as default};
